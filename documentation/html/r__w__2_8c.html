<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ReadersAndWriters: r_w_2.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ReadersAndWriters
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">r_w_2.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;stdint.h&gt;</code><br />
<code>#include &lt;pthread.h&gt;</code><br />
<code>#include &lt;time.h&gt;</code><br />
<code>#include &lt;unistd.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &lt;signal.h&gt;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structpresence.html">presence</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Thread presence in queue or in library.  <a href="structpresence.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a70b38cccdc01cdc71c3163298376e487"><td class="memItemLeft" align="right" valign="top"><a id="a70b38cccdc01cdc71c3163298376e487"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="r__w__2_8c.html#a70b38cccdc01cdc71c3163298376e487">ERROR_ARGUMENTS_MESSAGE</a>&#160;&#160;&#160;&quot;Usage: ReaderAndWriters2 number_of_writers number_of_readers [-t <a class="el" href="r__w__2_8c.html#a53fa5968a2db3937171d558ed1832d09">min_reading_time</a> <a class="el" href="r__w__2_8c.html#a6e97eb80faf3a652299454ee1d24842e">max_reading_time</a> <a class="el" href="r__w__2_8c.html#ad0962cb2401c3443302728963f8d1332">min_writing_time</a> <a class="el" href="r__w__2_8c.html#a8989e5d89865ee28cc02b7ab7a6db770">max_writing_time</a>] [-debug]\n&quot;</td></tr>
<tr class="memdesc:a70b38cccdc01cdc71c3163298376e487"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wrong arguments error message. <br /></td></tr>
<tr class="separator:a70b38cccdc01cdc71c3163298376e487"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af76ea9fb368db96038d8f01f612af9df"><td class="memItemLeft" align="right" valign="top"><a id="af76ea9fb368db96038d8f01f612af9df"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="r__w__2_8c.html#af76ea9fb368db96038d8f01f612af9df">NO_KIND</a>&#160;&#160;&#160;0</td></tr>
<tr class="memdesc:af76ea9fb368db96038d8f01f612af9df"><td class="mdescLeft">&#160;</td><td class="mdescRight">Thread kind to mark there is no one at this position in queue or library. <br /></td></tr>
<tr class="separator:af76ea9fb368db96038d8f01f612af9df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5979bda168c5fe267bfbe50a4f87c824"><td class="memItemLeft" align="right" valign="top"><a id="a5979bda168c5fe267bfbe50a4f87c824"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="r__w__2_8c.html#a5979bda168c5fe267bfbe50a4f87c824">READER_KIND</a>&#160;&#160;&#160;1</td></tr>
<tr class="memdesc:a5979bda168c5fe267bfbe50a4f87c824"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reader thread kind. <br /></td></tr>
<tr class="separator:a5979bda168c5fe267bfbe50a4f87c824"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a39240f78aa4949e47f6cecdb135d7509"><td class="memItemLeft" align="right" valign="top"><a id="a39240f78aa4949e47f6cecdb135d7509"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="r__w__2_8c.html#a39240f78aa4949e47f6cecdb135d7509">WRITER_KIND</a>&#160;&#160;&#160;2</td></tr>
<tr class="memdesc:a39240f78aa4949e47f6cecdb135d7509"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reader thread kind. <br /></td></tr>
<tr class="separator:a39240f78aa4949e47f6cecdb135d7509"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a388f572c62279f839ee138a9afbdeeb5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="r__w__2_8c.html#a388f572c62279f839ee138a9afbdeeb5">print</a> ()</td></tr>
<tr class="memdesc:a388f572c62279f839ee138a9afbdeeb5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prints library and queues state. There are two different of printing - one standard and one for debug mode.  <a href="#a388f572c62279f839ee138a9afbdeeb5">More...</a><br /></td></tr>
<tr class="separator:a388f572c62279f839ee138a9afbdeeb5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9901212efa6943de07eee8a84bb97a61"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="r__w__2_8c.html#a9901212efa6943de07eee8a84bb97a61">reader</a> (void *arg)</td></tr>
<tr class="memdesc:a9901212efa6943de07eee8a84bb97a61"><td class="mdescLeft">&#160;</td><td class="mdescRight">Readers thread. It works in endless loop. It waits for signal from its conditional variable and then enters library.  <a href="#a9901212efa6943de07eee8a84bb97a61">More...</a><br /></td></tr>
<tr class="separator:a9901212efa6943de07eee8a84bb97a61"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a35c056ce555ff51abe0ca3d8fb7e4bab"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="r__w__2_8c.html#a35c056ce555ff51abe0ca3d8fb7e4bab">writer</a> (void *arg)</td></tr>
<tr class="memdesc:a35c056ce555ff51abe0ca3d8fb7e4bab"><td class="mdescLeft">&#160;</td><td class="mdescRight">Writers thread. It works in endless loop. It waits for signal from its conditional variable and then enters library.  <a href="#a35c056ce555ff51abe0ca3d8fb7e4bab">More...</a><br /></td></tr>
<tr class="separator:a35c056ce555ff51abe0ca3d8fb7e4bab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9ac6b42c681fe2f9ef59bf124c607c5"><td class="memItemLeft" align="right" valign="top"><a id="ac9ac6b42c681fe2f9ef59bf124c607c5"></a>
void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="r__w__2_8c.html#ac9ac6b42c681fe2f9ef59bf124c607c5">librarian</a> ()</td></tr>
<tr class="memdesc:ac9ac6b42c681fe2f9ef59bf124c607c5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Librarians thread. It checks every second who is at first position at queue - if it's reader, librarian waits till there is no writer in library (if there was any). Then it sends signal to reader that he can come in. If there is a writer at first position in queue - librarian waits till everyone leaves library and then sends signal to the writer. <br /></td></tr>
<tr class="separator:ac9ac6b42c681fe2f9ef59bf124c607c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a9960f1ab8215ec79ba90e17d643f51"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="r__w__2_8c.html#a6a9960f1ab8215ec79ba90e17d643f51">write_book</a> (int writer_id)</td></tr>
<tr class="memdesc:a6a9960f1ab8215ec79ba90e17d643f51"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function symbolises entering library by a writer and writing a book. It takes off first thread from queue and puts writer to *in_library array. After that function sleeps for some random time (by default 5-15 seconds, it can be changed by main function arguments) and leaves library (removes itself from *in_library array and gets back to queue).  <a href="#a6a9960f1ab8215ec79ba90e17d643f51">More...</a><br /></td></tr>
<tr class="separator:a6a9960f1ab8215ec79ba90e17d643f51"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac01ba1e54436f3393be166e273c75da0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="r__w__2_8c.html#ac01ba1e54436f3393be166e273c75da0">read_books</a> (int reader_id)</td></tr>
<tr class="memdesc:ac01ba1e54436f3393be166e273c75da0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function symbolises entering library by a reader and reading books. It takes off first thread from queue and puts reader to *in_library array. After that function sleeps for some random time (by default 0-5 seconds, it can be changed by main function arguments) and leaves library (removes itself from *in_library array and gets back to queue).  <a href="#ac01ba1e54436f3393be166e273c75da0">More...</a><br /></td></tr>
<tr class="separator:ac01ba1e54436f3393be166e273c75da0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8616aba74988737c06e44fd448c24516"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="r__w__2_8c.html#a8616aba74988737c06e44fd448c24516">get_random</a> (int min, int max)</td></tr>
<tr class="memdesc:a8616aba74988737c06e44fd448c24516"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function gets random integer from min - max range (inclusive).  <a href="#a8616aba74988737c06e44fd448c24516">More...</a><br /></td></tr>
<tr class="separator:a8616aba74988737c06e44fd448c24516"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a740f56e6426fb4eea5b3b0bd6877aac0"><td class="memItemLeft" align="right" valign="top">time_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="r__w__2_8c.html#a740f56e6426fb4eea5b3b0bd6877aac0">get_timestamp</a> ()</td></tr>
<tr class="memdesc:a740f56e6426fb4eea5b3b0bd6877aac0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function gets timestamp from system time.  <a href="#a740f56e6426fb4eea5b3b0bd6877aac0">More...</a><br /></td></tr>
<tr class="separator:a740f56e6426fb4eea5b3b0bd6877aac0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae733fe874122894bac75e1be37326ceb"><td class="memItemLeft" align="right" valign="top"><a id="ae733fe874122894bac75e1be37326ceb"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="r__w__2_8c.html#ae733fe874122894bac75e1be37326ceb">init_queue</a> ()</td></tr>
<tr class="memdesc:ae733fe874122894bac75e1be37326ceb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function initialises *queue and *in_library arrays. <br /></td></tr>
<tr class="separator:ae733fe874122894bac75e1be37326ceb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a08004131aacb551995e4fcb0dfb678"><td class="memItemLeft" align="right" valign="top"><a id="a2a08004131aacb551995e4fcb0dfb678"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="r__w__2_8c.html#a2a08004131aacb551995e4fcb0dfb678">signal_handler</a> ()</td></tr>
<tr class="memdesc:a2a08004131aacb551995e4fcb0dfb678"><td class="mdescLeft">&#160;</td><td class="mdescRight">Signal handler changes signal_flag to 0. <br /></td></tr>
<tr class="separator:a2a08004131aacb551995e4fcb0dfb678"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa95569d904ce9054abea38d058dea4d4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="r__w__2_8c.html#aa95569d904ce9054abea38d058dea4d4">args_interpreter</a> (int argc, char **argv)</td></tr>
<tr class="memdesc:aa95569d904ce9054abea38d058dea4d4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Arguments interpreter. Checks program arguments and sets global variables or exits program if arguments are incorrect.  <a href="#aa95569d904ce9054abea38d058dea4d4">More...</a><br /></td></tr>
<tr class="separator:aa95569d904ce9054abea38d058dea4d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f23e4bbd4e9ba1442c0e71e6644fc7b"><td class="memItemLeft" align="right" valign="top"><a id="a2f23e4bbd4e9ba1442c0e71e6644fc7b"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="r__w__2_8c.html#a2f23e4bbd4e9ba1442c0e71e6644fc7b">variables_initializer</a> ()</td></tr>
<tr class="memdesc:a2f23e4bbd4e9ba1442c0e71e6644fc7b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocates memory for global variables. <br /></td></tr>
<tr class="separator:a2f23e4bbd4e9ba1442c0e71e6644fc7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a003a1ea8ce7b8f5c058d66ed95c637"><td class="memItemLeft" align="right" valign="top"><a id="a0a003a1ea8ce7b8f5c058d66ed95c637"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="r__w__2_8c.html#a0a003a1ea8ce7b8f5c058d66ed95c637">cleaner</a> ()</td></tr>
<tr class="memdesc:a0a003a1ea8ce7b8f5c058d66ed95c637"><td class="mdescLeft">&#160;</td><td class="mdescRight">Frees memory allocated for global variables. <br /></td></tr>
<tr class="separator:a0a003a1ea8ce7b8f5c058d66ed95c637"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb83090b09ef630626b7f77bb4bd7a39"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="r__w__2_8c.html#afb83090b09ef630626b7f77bb4bd7a39">get_readers_queue_count</a> ()</td></tr>
<tr class="memdesc:afb83090b09ef630626b7f77bb4bd7a39"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function counts readers in queue.  <a href="#afb83090b09ef630626b7f77bb4bd7a39">More...</a><br /></td></tr>
<tr class="separator:afb83090b09ef630626b7f77bb4bd7a39"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a612408f5c7b4021b475cacc7315f18af"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="r__w__2_8c.html#a612408f5c7b4021b475cacc7315f18af">get_writers_queue_count</a> ()</td></tr>
<tr class="memdesc:a612408f5c7b4021b475cacc7315f18af"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function counts writers in queue.  <a href="#a612408f5c7b4021b475cacc7315f18af">More...</a><br /></td></tr>
<tr class="separator:a612408f5c7b4021b475cacc7315f18af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7eac0202bb9cf9cdcaea4af49a64ae0f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="r__w__2_8c.html#a7eac0202bb9cf9cdcaea4af49a64ae0f">get_writers_in_library_count</a> ()</td></tr>
<tr class="memdesc:a7eac0202bb9cf9cdcaea4af49a64ae0f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function counts writers in library.  <a href="#a7eac0202bb9cf9cdcaea4af49a64ae0f">More...</a><br /></td></tr>
<tr class="separator:a7eac0202bb9cf9cdcaea4af49a64ae0f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7a35d2c41a80a512ba92025b4ba9e09b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="r__w__2_8c.html#a7a35d2c41a80a512ba92025b4ba9e09b">get_readers_in_library_count</a> ()</td></tr>
<tr class="memdesc:a7a35d2c41a80a512ba92025b4ba9e09b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function counts readers in library.  <a href="#a7a35d2c41a80a512ba92025b4ba9e09b">More...</a><br /></td></tr>
<tr class="separator:a7a35d2c41a80a512ba92025b4ba9e09b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a975256163228e43a995cefecc303e1a6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="r__w__2_8c.html#a975256163228e43a995cefecc303e1a6">get_to_queue</a> (int kind, int id)</td></tr>
<tr class="memdesc:a975256163228e43a995cefecc303e1a6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function looks for first empty position in queue and puts there writer or reader. It also sets current timestamp.  <a href="#a975256163228e43a995cefecc303e1a6">More...</a><br /></td></tr>
<tr class="separator:a975256163228e43a995cefecc303e1a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab12823b4d3dd15c7f0d037097b0bb645"><td class="memItemLeft" align="right" valign="top"><a id="ab12823b4d3dd15c7f0d037097b0bb645"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="r__w__2_8c.html#ab12823b4d3dd15c7f0d037097b0bb645">leave_queue</a> ()</td></tr>
<tr class="memdesc:ab12823b4d3dd15c7f0d037097b0bb645"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function puts at every position in queue presence from next position. Previous last position is overridden with NO_KIND presence. <br /></td></tr>
<tr class="separator:ab12823b4d3dd15c7f0d037097b0bb645"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9bcd27a015c027031fc5ef9dbde30341"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="r__w__2_8c.html#a9bcd27a015c027031fc5ef9dbde30341">get_to_library</a> (int kind, int id)</td></tr>
<tr class="memdesc:a9bcd27a015c027031fc5ef9dbde30341"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function looks for first empty position in *in_library array and puts there writer or reader. It also sets current timestamp.  <a href="#a9bcd27a015c027031fc5ef9dbde30341">More...</a><br /></td></tr>
<tr class="separator:a9bcd27a015c027031fc5ef9dbde30341"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad9f9bcf3c0e79c66ad4e210f1410da92"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="r__w__2_8c.html#ad9f9bcf3c0e79c66ad4e210f1410da92">leave_library</a> (int kind, int id)</td></tr>
<tr class="memdesc:ad9f9bcf3c0e79c66ad4e210f1410da92"><td class="mdescLeft">&#160;</td><td class="mdescRight">Looks *in_library array for thread wanting to leave library and overrides it with NO_KIND presence.  <a href="#ad9f9bcf3c0e79c66ad4e210f1410da92">More...</a><br /></td></tr>
<tr class="separator:ad9f9bcf3c0e79c66ad4e210f1410da92"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ddf1224851353fc92bfbff6f499fa97"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="r__w__2_8c.html#a0ddf1224851353fc92bfbff6f499fa97">main</a> (int argc, char *argv[])</td></tr>
<tr class="memdesc:a0ddf1224851353fc92bfbff6f499fa97"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates readers, writers and librarian threads. After that function works in endless loop and (in debug mode) prints library state every second. Loop can be stopped with SIGINT signal (ctrl+c). In that case function cancels all threads and frees memory allocated for variables.  <a href="#a0ddf1224851353fc92bfbff6f499fa97">More...</a><br /></td></tr>
<tr class="separator:a0ddf1224851353fc92bfbff6f499fa97"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a81993dd7538c53492c21d310f4cd8425"><td class="memItemLeft" align="right" valign="top"><a id="a81993dd7538c53492c21d310f4cd8425"></a>
volatile int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="r__w__2_8c.html#a81993dd7538c53492c21d310f4cd8425">signal_flag</a> = 1</td></tr>
<tr class="memdesc:a81993dd7538c53492c21d310f4cd8425"><td class="mdescLeft">&#160;</td><td class="mdescRight">Loop in main function works until signal_flag is set. When SIGINT signal is received, flag is changed to 0 and loop stops. <br /></td></tr>
<tr class="separator:a81993dd7538c53492c21d310f4cd8425"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4acff8232e4aec9cd5c6dc200ac55ef3"><td class="memItemLeft" align="right" valign="top"><a id="a4acff8232e4aec9cd5c6dc200ac55ef3"></a>
pthread_mutex_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="r__w__2_8c.html#a4acff8232e4aec9cd5c6dc200ac55ef3">mutex</a></td></tr>
<tr class="memdesc:a4acff8232e4aec9cd5c6dc200ac55ef3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Just a mutex. <br /></td></tr>
<tr class="separator:a4acff8232e4aec9cd5c6dc200ac55ef3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af812b764b0c614696f32b69c41a56165"><td class="memItemLeft" align="right" valign="top"><a id="af812b764b0c614696f32b69c41a56165"></a>
pthread_cond_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="r__w__2_8c.html#af812b764b0c614696f32b69c41a56165">readers_conds</a></td></tr>
<tr class="memdesc:af812b764b0c614696f32b69c41a56165"><td class="mdescLeft">&#160;</td><td class="mdescRight">Array of conditional variables to handle readers. <br /></td></tr>
<tr class="separator:af812b764b0c614696f32b69c41a56165"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa81a9afe3f27e9e9a415d4c9eb5fbd3"><td class="memItemLeft" align="right" valign="top"><a id="aaa81a9afe3f27e9e9a415d4c9eb5fbd3"></a>
pthread_cond_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="r__w__2_8c.html#aaa81a9afe3f27e9e9a415d4c9eb5fbd3">writers_conds</a></td></tr>
<tr class="memdesc:aaa81a9afe3f27e9e9a415d4c9eb5fbd3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Array of conditional variables to handle writers. <br /></td></tr>
<tr class="separator:aaa81a9afe3f27e9e9a415d4c9eb5fbd3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5823680a1d455be931e97d6fbf0be228"><td class="memItemLeft" align="right" valign="top"><a id="a5823680a1d455be931e97d6fbf0be228"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="r__w__2_8c.html#a5823680a1d455be931e97d6fbf0be228">is_debug_run</a> = 0</td></tr>
<tr class="memdesc:a5823680a1d455be931e97d6fbf0be228"><td class="mdescLeft">&#160;</td><td class="mdescRight">Flag marking debug mode. <br /></td></tr>
<tr class="separator:a5823680a1d455be931e97d6fbf0be228"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd6c40de3c12fd6c40c3b32883e5605f"><td class="memItemLeft" align="right" valign="top"><a id="afd6c40de3c12fd6c40c3b32883e5605f"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="r__w__2_8c.html#afd6c40de3c12fd6c40c3b32883e5605f">readers_count</a></td></tr>
<tr class="memdesc:afd6c40de3c12fd6c40c3b32883e5605f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of readers. <br /></td></tr>
<tr class="separator:afd6c40de3c12fd6c40c3b32883e5605f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7239cd77eaa159d097857f3411525423"><td class="memItemLeft" align="right" valign="top"><a id="a7239cd77eaa159d097857f3411525423"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="r__w__2_8c.html#a7239cd77eaa159d097857f3411525423">writers_count</a></td></tr>
<tr class="memdesc:a7239cd77eaa159d097857f3411525423"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of writers. <br /></td></tr>
<tr class="separator:a7239cd77eaa159d097857f3411525423"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa1c11e8a3c6ff0e1796a1d31627e5a90"><td class="memItemLeft" align="right" valign="top"><a id="aa1c11e8a3c6ff0e1796a1d31627e5a90"></a>
struct <a class="el" href="structpresence.html">presence</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="r__w__2_8c.html#aa1c11e8a3c6ff0e1796a1d31627e5a90">queue</a></td></tr>
<tr class="memdesc:aa1c11e8a3c6ff0e1796a1d31627e5a90"><td class="mdescLeft">&#160;</td><td class="mdescRight">Common writers and readers queue. <br /></td></tr>
<tr class="separator:aa1c11e8a3c6ff0e1796a1d31627e5a90"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af34d76d42323e95db0f2e27eaa213e4b"><td class="memItemLeft" align="right" valign="top"><a id="af34d76d42323e95db0f2e27eaa213e4b"></a>
struct <a class="el" href="structpresence.html">presence</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="r__w__2_8c.html#af34d76d42323e95db0f2e27eaa213e4b">in_library</a></td></tr>
<tr class="memdesc:af34d76d42323e95db0f2e27eaa213e4b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Presence in library - common for writers and readers. <br /></td></tr>
<tr class="separator:af34d76d42323e95db0f2e27eaa213e4b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a53fa5968a2db3937171d558ed1832d09"><td class="memItemLeft" align="right" valign="top"><a id="a53fa5968a2db3937171d558ed1832d09"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="r__w__2_8c.html#a53fa5968a2db3937171d558ed1832d09">min_reading_time</a> = 0</td></tr>
<tr class="memdesc:a53fa5968a2db3937171d558ed1832d09"><td class="mdescLeft">&#160;</td><td class="mdescRight">Minimum time that reader spends in library. <br /></td></tr>
<tr class="separator:a53fa5968a2db3937171d558ed1832d09"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e97eb80faf3a652299454ee1d24842e"><td class="memItemLeft" align="right" valign="top"><a id="a6e97eb80faf3a652299454ee1d24842e"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="r__w__2_8c.html#a6e97eb80faf3a652299454ee1d24842e">max_reading_time</a> = 5</td></tr>
<tr class="memdesc:a6e97eb80faf3a652299454ee1d24842e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maximum time that reader spends in library. <br /></td></tr>
<tr class="separator:a6e97eb80faf3a652299454ee1d24842e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad0962cb2401c3443302728963f8d1332"><td class="memItemLeft" align="right" valign="top"><a id="ad0962cb2401c3443302728963f8d1332"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="r__w__2_8c.html#ad0962cb2401c3443302728963f8d1332">min_writing_time</a> = 5</td></tr>
<tr class="memdesc:ad0962cb2401c3443302728963f8d1332"><td class="mdescLeft">&#160;</td><td class="mdescRight">Minimum time that writer spends in library. <br /></td></tr>
<tr class="separator:ad0962cb2401c3443302728963f8d1332"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8989e5d89865ee28cc02b7ab7a6db770"><td class="memItemLeft" align="right" valign="top"><a id="a8989e5d89865ee28cc02b7ab7a6db770"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="r__w__2_8c.html#a8989e5d89865ee28cc02b7ab7a6db770">max_writing_time</a> = 15</td></tr>
<tr class="memdesc:a8989e5d89865ee28cc02b7ab7a6db770"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maximum time that writer spends in library. <br /></td></tr>
<tr class="separator:a8989e5d89865ee28cc02b7ab7a6db770"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Readers and Writers - implementation 2</p>
<p>Implementation with no starvation of writers or readers. It uses conditional variables - one for each reader and one for each writer. In this implementation there is an additional thread - librarian. All readers and writers wait in FIFO queue. Librarian checks every second who is at first position at queue - if it's reader librarian waits till no writer is in library (if there was any). Then it sends signal to reader that he can come in. If there is a writer at first position in queue - librarian waits till everyone leave library and then sends signal to the writer.</p>
<dl class="section author"><dt>Author</dt><dd>Mateusz Wawreszuk </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="aa95569d904ce9054abea38d058dea4d4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa95569d904ce9054abea38d058dea4d4">&#9670;&nbsp;</a></span>args_interpreter()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void args_interpreter </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>argv</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Arguments interpreter. Checks program arguments and sets global variables or exits program if arguments are incorrect. </p>
<ol type="1">
<li>Reads two first arguments - writers and readers count and sets it to global variables.</li>
<li>(optional) Checks next arguments and enters debug mode or sets up times.</li>
</ol>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">argc</td><td>Arguments count </td></tr>
    <tr><td class="paramname">argv</td><td>Array of arguments </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a8616aba74988737c06e44fd448c24516"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8616aba74988737c06e44fd448c24516">&#9670;&nbsp;</a></span>get_random()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int get_random </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>min</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>max</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function gets random integer from min - max range (inclusive). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">min</td><td>Minimum number that can be generated. </td></tr>
    <tr><td class="paramname">max</td><td>Maximum number that can be generated. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Random integer </dd></dl>

</div>
</div>
<a id="a7a35d2c41a80a512ba92025b4ba9e09b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7a35d2c41a80a512ba92025b4ba9e09b">&#9670;&nbsp;</a></span>get_readers_in_library_count()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int get_readers_in_library_count </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function counts readers in library. </p>
<dl class="section return"><dt>Returns</dt><dd>Number of readers in library </dd></dl>

</div>
</div>
<a id="afb83090b09ef630626b7f77bb4bd7a39"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afb83090b09ef630626b7f77bb4bd7a39">&#9670;&nbsp;</a></span>get_readers_queue_count()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int get_readers_queue_count </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function counts readers in queue. </p>
<dl class="section return"><dt>Returns</dt><dd>Number of readers in queue </dd></dl>

</div>
</div>
<a id="a740f56e6426fb4eea5b3b0bd6877aac0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a740f56e6426fb4eea5b3b0bd6877aac0">&#9670;&nbsp;</a></span>get_timestamp()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">time_t get_timestamp </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function gets timestamp from system time. </p>
<dl class="section return"><dt>Returns</dt><dd>Timestamp </dd></dl>

</div>
</div>
<a id="a9bcd27a015c027031fc5ef9dbde30341"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9bcd27a015c027031fc5ef9dbde30341">&#9670;&nbsp;</a></span>get_to_library()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void get_to_library </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>kind</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function looks for first empty position in *in_library array and puts there writer or reader. It also sets current timestamp. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">kind</td><td>Kind of thread that want to get to library </td></tr>
    <tr><td class="paramname">id</td><td>Id of thread that want to get to library </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a975256163228e43a995cefecc303e1a6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a975256163228e43a995cefecc303e1a6">&#9670;&nbsp;</a></span>get_to_queue()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void get_to_queue </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>kind</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function looks for first empty position in queue and puts there writer or reader. It also sets current timestamp. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">kind</td><td>Kind of thread that want to get to queue </td></tr>
    <tr><td class="paramname">id</td><td>Id of thread that want to get to queue </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a7eac0202bb9cf9cdcaea4af49a64ae0f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7eac0202bb9cf9cdcaea4af49a64ae0f">&#9670;&nbsp;</a></span>get_writers_in_library_count()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int get_writers_in_library_count </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function counts writers in library. </p>
<dl class="section return"><dt>Returns</dt><dd>Number of writers in library </dd></dl>

</div>
</div>
<a id="a612408f5c7b4021b475cacc7315f18af"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a612408f5c7b4021b475cacc7315f18af">&#9670;&nbsp;</a></span>get_writers_queue_count()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int get_writers_queue_count </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function counts writers in queue. </p>
<dl class="section return"><dt>Returns</dt><dd>Number of writers in queue </dd></dl>

</div>
</div>
<a id="ad9f9bcf3c0e79c66ad4e210f1410da92"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad9f9bcf3c0e79c66ad4e210f1410da92">&#9670;&nbsp;</a></span>leave_library()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void leave_library </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>kind</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Looks *in_library array for thread wanting to leave library and overrides it with NO_KIND presence. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">kind</td><td>Kind of thread that wants to leave library </td></tr>
    <tr><td class="paramname">id</td><td>Id of thread that wants to leave library </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a0ddf1224851353fc92bfbff6f499fa97"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0ddf1224851353fc92bfbff6f499fa97">&#9670;&nbsp;</a></span>main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>argv</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates readers, writers and librarian threads. After that function works in endless loop and (in debug mode) prints library state every second. Loop can be stopped with SIGINT signal (ctrl+c). In that case function cancels all threads and frees memory allocated for variables. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">argc</td><td>arguments count </td></tr>
    <tr><td class="paramname">argv</td><td>arguments array </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 (no error code) </dd></dl>

</div>
</div>
<a id="a388f572c62279f839ee138a9afbdeeb5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a388f572c62279f839ee138a9afbdeeb5">&#9670;&nbsp;</a></span>print()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void print </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Prints library and queues state. There are two different of printing - one standard and one for debug mode. </p>
<p>In standard mode function prints message in format: ReaderQ: readers_in_queue WriterQ: writers_in_queue [ in: R:readers_in_library W:writers_in_library ]</p>
<p>In debug mode function prints all threads with theirs numbers - grouped to queue and library. Format: Queue (seconds in queue): Reader reader_number (seconds_in_queue) or Writer writer_number (seconds_in_queue) (...)</p>
<p>In library (seconds in library): Writer writer_number (seconds_in_queue) or Reader reader_number (seconds_in_queue) (...) </p>

</div>
</div>
<a id="ac01ba1e54436f3393be166e273c75da0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac01ba1e54436f3393be166e273c75da0">&#9670;&nbsp;</a></span>read_books()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void read_books </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>reader_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function symbolises entering library by a reader and reading books. It takes off first thread from queue and puts reader to *in_library array. After that function sleeps for some random time (by default 0-5 seconds, it can be changed by main function arguments) and leaves library (removes itself from *in_library array and gets back to queue). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">reader_id</td><td>Reader thread id </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a9901212efa6943de07eee8a84bb97a61"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9901212efa6943de07eee8a84bb97a61">&#9670;&nbsp;</a></span>reader()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* reader </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>arg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Readers thread. It works in endless loop. It waits for signal from its conditional variable and then enters library. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">arg</td><td>Reader id </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a6a9960f1ab8215ec79ba90e17d643f51"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6a9960f1ab8215ec79ba90e17d643f51">&#9670;&nbsp;</a></span>write_book()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void write_book </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>writer_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function symbolises entering library by a writer and writing a book. It takes off first thread from queue and puts writer to *in_library array. After that function sleeps for some random time (by default 5-15 seconds, it can be changed by main function arguments) and leaves library (removes itself from *in_library array and gets back to queue). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">writer_id</td><td>Writer thread id </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a35c056ce555ff51abe0ca3d8fb7e4bab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a35c056ce555ff51abe0ca3d8fb7e4bab">&#9670;&nbsp;</a></span>writer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* writer </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>arg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Writers thread. It works in endless loop. It waits for signal from its conditional variable and then enters library. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">arg</td><td>Writer id </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
